---
title: 项目中对一次性码的理解及使用
author: magnificent
date: 2020-05-05 07:24:00 +0800
categories: [js, code]
tags: [js, code]
---

### 一次性code的业务场景需求

*发送短信模版中包含了h5链接，提供给用户进行身份验证。

*每条短信中的链接需保证时效性，唯一性，安全性。

### 解决思路

*在每条链接的地址栏中带上参数code。

>code的有效期是5分钟，code只能使用一次。（保证了链接的时效性及唯一性）

*用参数code去请求后端获取到token。

>token的有效期是24小时。（保证了用户验证身份的充分时间及时效性）

*用参数token去请求后端获取用户的相关数据。

### 相似场景

微信小程序中code的使用。

>小程序中前端根据微信提供的方法wx.login获取到微信提供的code（code24小时有效期，只能使用一次）。返回给后端，后端根据code获取到openId进行用户绑定。保证了用户信息的安全性。
